# Frontend (React + Vite + Tailwind v4)

基于 Vite 的 React 19 前端，用于录入/查看“现金、储备金、获得经验”数据并对接后端 OCR。

## 运行
```bash
cd frontend
npm install
npm run dev    # 本地开发，默认端口 5173
npm run build  # 生产构建
```

## 关键功能
- 多账号：支持新增/重命名/删除账号，数据按账号隔离存储在后端（`state_<account>.json`），切换账号自动加载对应数据。
- OCR 录入：点击“识别 现金+经验”或“识别 储备金”，粘贴/选择图片后点击“确定上传并识别”，图片会带上当前账号上传到后端 `/ocr`，后端保存为 `账号_时间戳.ext` 并返回数值填充表单。
- 时间记录：识别时记录完整日期时间（ISO），跨天也能正确计算挂机时长。
- 计算/周报：计算净收益、时长、每小时收益；周报自动统计本周，汇总使用本周净收益÷本周时长。周报展示当前周数据，历史仍保留在 state 文件。
- 数据持久化：前端状态实时去抖保存到后端，加载失败/保存失败会在顶部提示；保存前等待首次加载完成，避免空数据回写。
- 导出 CSV：点击“导出 Excel”跨账号导出所有账号的数据，账号列使用账号名称，包含无数据账号的空行，文件名 `weekly_report_all_accounts.csv`。

## 与后端对接（粘贴/选择图片 + 确认上传）
- 后端（FastAPI）默认 `http://localhost:8000`。
  - `POST /ocr?account=当前账号`：表单 `file` 为图片，`account` 同时放在表单字段；后端按账号+时间戳命名图片。
  - `GET /state?account=当前账号` / `POST /state?account=当前账号`：读写该账号的状态文件；无 `account` 时读写全局账号列表。
- 使用流程：
  1) 点击“识别 现金+经验”或“识别 储备金”锁定目标。
  2) 粘贴图片或点击“选择图片”，预览后点击“确定上传并识别”。
  3) 填充数据后点击“计算并保存到周报”写入本周数据。

## 目录说明
- `src/App.jsx`：核心界面与业务逻辑（账号管理、OCR 上传、状态持久化、计算、周报、导出）。
- `src/main.jsx`：入口文件。
- `src/index.css`：导入 Tailwind v4。
- `vite.config.js` / `package.json`：Vite & 依赖配置。
